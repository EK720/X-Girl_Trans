; X-Girl - Cyberpunk Adventure (PC-98) - MC_B01.MES
; Translation by Fuzion
; Script Editing by Tan2000
; Content Revision by OldCorpo
; Chapter 1 - April and Lei-Fa
; Section 1.4 - Lei-Fa's arrest
; -----Location:-----
; Inside Ruined Building, Chinatown
; -----Scene:-----
; Lei-Fa's battle scene.
; --Battle:--
; 1. Shoot Lei-Fa at her left eye.
; 2. Shoot Lei-Fa at stomach.
; 3. Shoot Lei-Fa at left leg.
(mes
 (meta (engine 'ADV) (charset "pc98") (extraop #t))
 (seg*
  (exec-mem 3072 0)
  (set-reg 514 #f)
  (set-reg 515 #f)
  (set-reg 516 #f)
  (mes-load? "mes¥bat_chan.mec" 0)
  (mes-load? 0)
  (exec-mem 14080 2 24 4 135 71 80 34 80 34 0 30)
  (if (</>
       (// (? (= 930 #f)) (image-file "gpc¥c1_04.gpc") (image-mem 0 3))
       (//
        (? (= 930 #t))
        (image-file "gpc¥c1_04a.gpc")
        (image-mem 0 3)
        (image-file "gpc¥shotwaku.gpc")
        (image-mem 1 0))))
  (proc 3)
  (if (</>
       (//
        (? (!= P 15))
        (if (</>
             (//
              (? (= O 0))
              (sound '|| 0)
              (sound '|| "uso¥xg_15.uso")
              (sound '|| 1)
              (nop@)
              (set-var P 15))
             (//
              (? (= O 1))
              (sound '|| 0)
              (sound '|| "uso¥xg_15v.uso")
              (sound '|| 1)
              (nop@)
              (set-var P 15)))))
       (// (nop@))))
  (load-mem "clm¥c1_04.clm" 32768)
  (exec-mem 24576 0 0 2 5 0 1)
  (exec-mem 24576 1 0 0 0 0 "Z")
  (exec-mem 24576 2 1)
  (text-frame 15 312 75 383)
  (text-delay 0)
  (str "「Lei-Fa」" 'br)
  (text-delay 2)
  (str "Get ready, or you won't even know what hit you!")
  (wait)
  (text-reset 14)
  (str "Lei-Fa readies her nunchucks and closes the distance. She" 'br)
  (str "moves with the confidence of a trained martial artist.")
  (wait)
  (text-reset 14)
  (text-delay 0)
  (str "「Kiyomi」" 'br)
  (text-delay 2)
  (str "Damn, she's intimidating......")
  (wait)
  (text-reset 14)
  (exec-mem 11680 0)
  (exec-mem 12288 3 0 1 5 0)
  (exec-mem 7072 0 0 15 0)
  (exec-mem 7072 1 0 15 0)
  (exec-mem 7072 2 0 15 0)
  (exec-mem 7072 3 0 15 0)
  (exec-mem 7072 4 0 15 0)
  (exec-mem 7072 5 0 15 0)
  (exec-mem 7072 6 0 15 0)
  (exec-mem 7072 7 0 15 0)
  (exec-mem 7072 8 0 15 0)
  (exec-mem 7072 9 0 15 0)
  (exec-mem 7072 10 0 15 0)
  (exec-mem 7072 11 0 15 0)
  (exec-mem 7072 12 0 15 0)
  (exec-mem 7072 13 0 15 0)
  (exec-mem 7072 14 0 15 0)
  (exec-mem 7072 15 0 15 0)
  (sound 'se 3)
  (delay 8)
  (exec-mem 7936 0)
  (if (</>
       (//
        (? (= O 0))
        (sound '|| 0)
        (sound '|| "uso¥xg_15.uso")
        (sound '|| 1)
        (nop@)
        (set-var P 15))
       (//
        (? (= O 1))
        (sound '|| 0)
        (sound '|| "uso¥xg_15v.uso")
        (sound '|| 1)
        (nop@)
        (set-var P 15))))
  (text-delay 0)
  (str "「Lei-Fa」" 'br)
  (text-delay 2)
  (str "You move like a wooden doll. How pathetic!")
  (wait)
  (text-reset 14)
  (text-delay 0)
  (str "「Kiyomi」" 'br)
  (text-delay 2)
  (str "Can it. I don't need a lecture from you.")
  (wait)
  (text-reset 14)
  (exec-mem 256 "I")
  (exec-mem 3968 101 104 24 535 271)
  (image-file "gpc¥shotwaku.gpc")
  (image-mem 1 0)
  (exec-mem 25984 1)
  (exec-mem 25984 2 1)
  (exec-mem 24576 3)
  (exec-mem 3072 2)
  (text-reset 14)
  (exec-mem 27008 14)
  (loop (set-var S 0) (exec-mem 3072 1020 1021 "S" 32768) (seg-call)))
 (seg (? (= 514 #t) (= 515 #t) (= 516 #t))
   (nop@)
   (exec-mem 24576 4)
   (exec-mem 25984 2 0)
   (exec-mem 3968 101 0 0 639 399)
   (exec-mem 3072 0)
   (if (</>
        (// (? (= 930 #f)) (image-file "gpc¥c1_05.gpc") (image-mem 0 3))
        (//
         (? (= 930 #t))
         (image-file "gpc¥c1_05a.gpc")
         (image-mem 0 3)
         (image-file "gpc¥shotwaku.gpc")
         (image-mem 1 0))))
   (text-delay 0)
   (str "「Lei-Fa」" 'br)
   (text-delay 2)
   (str "M-my body...... it won't move.")
   (wait)
   (text-reset 14)
   (text-delay 0)
   (str "「Kiyomi」" 'br)
   (text-delay 2)
   (str "When you're quiet like that, you're actually pretty cute.")
   (wait)
   (text-reset 14)
   (text-delay 0)
   (str "「Lei-Fa」" 'br)
   (text-delay 2)
   (str "Damn, if I hadn't let my guard down...... I would never have" 'br)
   (str "lost to someone like you......")
   (wait)
   (text-reset 14)
   (text-delay 0)
   (str "「Kiyomi」" 'br)
   (text-delay 2)
   (str "Too bad you won't get another chance. Soon, you won't even" 'br)
   (str "be able to speak. You know what happens after that, right?")
   (wait)
   (text-reset 14)
   (text-delay 0)
   (str "「Lei-Fa」" 'br)
   (text-delay 2)
   (str "..................")
   (wait)
   (text-reset 14)
   (text-delay 0)
   (str "「Kiyomi」" 'br)
   (text-delay 2)
   (str "It's pretty frustrating, isn't it? I can tell.")
   (wait)
   (text-reset 14)
   (text-delay 0)
   (str "「Kiyomi」" 'br)
   (text-delay 2)
   (str "But the humiliation waiting for you is much worse than this." 'br)
   (str "If you're expecting to be treated like a human, give up now.")
   (wait)
   (text-reset 14)
   (text-delay 0)
   (str "「Lei-Fa」" 'br)
   (text-delay 2)
   (str "Fuugh, auuuh......")
   (wait)
   (text-reset 14)
   (text-delay 0)
   (str "「Kiyomi」" 'br)
   (text-delay 2)
   (str "Can't even talk properly anymore? Well then, let's get going.")
   (str "I'll take real good care of you at Intelligence.")
   (wait)
   (text-reset 14)
   (nop@)
   (set-reg 59 #t)
   (nop@)
   (set-reg 935 #t)
   (exec-mem 14080 2 24 4 135 71 80 34 80 34 0 30)
   (mes-load? "mes¥bat_cha2.mec" 0)
   (mes-load? 0)
   (exec-mem 3072 0)
   (mes-jump "mes¥MA_A03.MES"))
 (seg (? (= Z 1))
   (exec-mem 24576 4)
   (exec-mem 25984 2 0)
   (exec-mem 3968 103)
   (exec-mem 3072 0)
   (exec-mem 11680 0)
   (exec-mem 12288 3 0 1 5 0)
   (exec-mem 7072 0 0 15 0)
   (exec-mem 7072 1 0 15 0)
   (exec-mem 7072 2 0 15 0)
   (exec-mem 7072 3 0 15 0)
   (exec-mem 7072 4 0 15 0)
   (exec-mem 7072 5 0 15 0)
   (exec-mem 7072 6 0 15 0)
   (exec-mem 7072 7 0 15 0)
   (exec-mem 7072 8 0 15 0)
   (exec-mem 7072 9 0 15 0)
   (exec-mem 7072 10 0 15 0)
   (exec-mem 7072 11 0 15 0)
   (exec-mem 7072 12 0 15 0)
   (exec-mem 7072 13 0 15 0)
   (exec-mem 7072 14 0 15 0)
   (exec-mem 7072 15 0 15 0)
   (sound 'se 3)
   (delay 8)
   (exec-mem 7936 0)
   (exec-mem 12288 3 0 1 5 0)
   (exec-mem 7072 0 0 15 0)
   (exec-mem 7072 1 0 15 0)
   (exec-mem 7072 2 0 15 0)
   (exec-mem 7072 3 0 15 0)
   (exec-mem 7072 4 0 15 0)
   (exec-mem 7072 5 0 15 0)
   (exec-mem 7072 6 0 15 0)
   (exec-mem 7072 7 0 15 0)
   (exec-mem 7072 8 0 15 0)
   (exec-mem 7072 9 0 15 0)
   (exec-mem 7072 10 0 15 0)
   (exec-mem 7072 11 0 15 0)
   (exec-mem 7072 12 0 15 0)
   (exec-mem 7072 13 0 15 0)
   (exec-mem 7072 14 0 15 0)
   (exec-mem 7072 15 0 15 0)
   (sound 'se 3)
   (delay 8)
   (exec-mem 7936 0)
   (exec-mem 12288 3 0 1 5 0)
   (exec-mem 7072 0 0 15 0)
   (exec-mem 7072 1 0 15 0)
   (exec-mem 7072 2 0 15 0)
   (exec-mem 7072 3 0 15 0)
   (exec-mem 7072 4 0 15 0)
   (exec-mem 7072 5 0 15 0)
   (exec-mem 7072 6 0 15 0)
   (exec-mem 7072 7 0 15 0)
   (exec-mem 7072 8 0 15 0)
   (exec-mem 7072 9 0 15 0)
   (exec-mem 7072 10 0 15 0)
   (exec-mem 7072 11 0 15 0)
   (exec-mem 7072 12 0 15 0)
   (exec-mem 7072 13 0 15 0)
   (exec-mem 7072 14 0 15 0)
   (exec-mem 7072 15 0 15 0)
   (sound 'se 3)
   (delay 8)
   (exec-mem 7936 0)
   (exec-mem 12288 3 0 1 5 0)
   (exec-mem 7072 0 0 15 0)
   (exec-mem 7072 1 0 15 0)
   (exec-mem 7072 2 0 15 0)
   (exec-mem 7072 3 0 15 0)
   (exec-mem 7072 4 0 15 0)
   (exec-mem 7072 5 0 15 0)
   (exec-mem 7072 6 0 15 0)
   (exec-mem 7072 7 0 15 0)
   (exec-mem 7072 8 0 15 0)
   (exec-mem 7072 9 0 15 0)
   (exec-mem 7072 10 0 15 0)
   (exec-mem 7072 11 0 15 0)
   (exec-mem 7072 12 0 15 0)
   (exec-mem 7072 13 0 15 0)
   (exec-mem 7072 14 0 15 0)
   (exec-mem 7072 15 0 15 0)
   (sound 'se 3)
   (delay 8)
   (exec-mem 7936 0)
   (exec-mem 3968 101 0 0 639 399)
   (exec-mem 24576 4)
   (exec-mem 25984 2 0)
   (exec-mem 3072 0)
   (text-delay 0)
   (str "「Lei-Fa」" 'br)
   (text-delay 2)
   (str "Too easy.")
   (wait)
   (text-reset 14)
   (text-delay 0)
   (str "「Kiyomi」" 'br)
   (text-delay 2)
   (str "............")
   (wait)
   (text-reset 14)
   (str "Lei-Fa's nunchucks precisely shattered the bones in my limbs.")
   (str "I can't even stand anymore.")
   (wait)
   (text-reset 14)
   (text-delay 0)
   (str "「Lei-Fa」" 'br)
   (text-delay 2)
   (str "Now I'll finish you off.")
   (wait)
   (text-reset 14)
   (text-delay 0)
   (str "「Kiyomi」" 'br)
   (text-delay 2)
   (str "Damn it, stop......")
   (wait)
   (text-reset 14)
   (text-delay 0)
   (str "「Lei-Fa」" 'br)
   (text-delay 2)
   (str "Begging for your life now is useless. I have to kill you or" 'br)
   (str "I'm in danger.")
   (wait)
   (text-reset 14)
   (str "I can see Lei-Fa readying her nunchucks in the corner of my" 'br)
   (str "eye.")
   (wait)
   (text-reset 14)
   (str "Her eyes are totally calm. The eyes of a real assassin......")
   (wait)
   (text-reset 14)
   ((cmd 209) 0 10)
   (exec-mem 256 "I")
   (exec-mem 9504 "E")
   (text-frame 0 0 79 399)
   (text-reset 14)
   ((cmd 209) 1 0)
   (exec-mem 256 "A 0 S 0")
   (exec-mem 256 "G 1 0 0 20 48")
   (exec-mem 4768 0 0 20 6 1 0 0 4480 4480 1 0)
   (exec-mem 3072 1)
   ((cmd 203) 5 0)
   (menu1 1 8 1 24 (</> (/ (str "     Continue")) (/ (str "     Give Up"))))
   (exec-mem 256 "P 1 0 0")
   ((cmd 203) 5 16)
   (if (</>
        (//
         (? (= S 0))
         ((cmd 209) 0 0)
         (image-file "gpc¥waku.gpc")
         (image-mem 0 3)
         ((cmd 209) 1 0)
         (nop@)
         (set-var P 0)
         (mes-jump "mes¥mc_b01.mes"))
        (// (? (= S 1)) (nop@) (set-var P 0) (mes-jump "mes¥x_menu.mes")))))
 (seg (? (= 1020 #f) (= 1021 #f)))
 (seg (? (= 1021 #t)))
 (seg (? (= S 1) (= 514 #f))
   (proc 7)
   (proc 9)
   (str "I grazed Lei-Fa's face. Looks like it's working!")
   (wait)
   (exec-mem 27008 14)
   (text-delay 0)
   (str "「Lei-Fa」" 'br)
   (text-delay 1)
   (str "N-not bad!")
   (wait)
   (exec-mem 27008 14)
   (nop@)
   (set-reg 514 #t)
   (proc 8))
 (seg (? (= S 1) (= 514 #t))
   (proc 7)
   (str "Lei-Fa narrowly avoids my shot!")
   (wait)
   (exec-mem 27008 14)
   (proc 8))
 (seg (? (= S 2) (= 515 #f))
   (proc 7)
   (proc 9)
   (str "Hit Lei-Fa in the stomach!")
   (wait)
   (exec-mem 27008 14)
   (text-delay 0)
   (str "「Lei-Fa」" 'br)
   (text-delay 1)
   (str "Ugh............")
   (wait)
   (exec-mem 27008 14)
   (nop@)
   (set-reg 515 #t)
   (proc 8))
 (seg (? (= S 2) (= 515 #t))
   (proc 7)
   (str "Lei-Fa easily twists out of the way!")
   (wait)
   (exec-mem 27008 14)
   (proc 8))
 (seg (? (= S 3) (= 516 #f))
   (proc 7)
   (proc 9)
   (str "Hit Lei-Fa in the leg!")
   (wait)
   (exec-mem 27008 14)
   (text-delay 0)
   (str "「Lei-Fa」" 'br)
   (text-delay 1)
   (str "That was just luck, there's no way I'll lose!")
   (wait)
   (exec-mem 27008 14)
   (nop@)
   (set-reg 516 #t)
   (proc 8))
 (seg (? (= S 3) (= 516 #t))
   (proc 7)
   (str "Lei-Fa dodged the bullet at the last second!")
   (wait)
   (exec-mem 27008 14)
   (proc 8))
 (seg (? (= S 4))
   (proc 7)
   (text-delay 0)
   (str "「Lei-Fa」" 'br)
   (text-delay 1)
   (str "Where are you aiming? You'll never beat me like that!")
   (wait)
   (exec-mem 27008 14)
   (proc 8)))
